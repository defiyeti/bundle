"use strict";angular.module("bundle",["ui.router","ngCordova"]).run(function(){}),angular.module("bundle").config(["$httpProvider","$stateProvider","$urlRouterProvider",function(n,r,e){function t(n){return["views"].concat(n).join("/")}e.otherwise("/app/barcode"),r.state("app",{url:"/app","abstract":!0,templateUrl:t(["app.html"])}).state("app.barcode",{url:"/barcode",controller:"DashboardCtrl",templateUrl:t(["dashboard.html"])})}]),angular.module("bundle").controller("DashboardCtrl",["$scope","$q","Utils","CordovaService",function(n,r,e,t){var u=e.Task,a=[];n.startScan=function(n){var r=new u(function(){return t.scan()});r.registerCallback("data",function(n){return n}),a.push(r),r.exec()},n.items=function(){return _.map(a,function(n){return n.getCallback("data")})}}]),angular.module("bundle").directive("onFilePick",function(){return{restrict:"A",link:function(n,r,e){var t=n.$eval(e.onFilePick);r.bind("change",t)}}}),angular.module("bundle").factory("CordovaService",["$http","$q","$cordovaBarcodeScanner",function(n,r,e){var t={};return document.addEventListener("deviceready",function(){t.scan=e.scan},!1),t}]),angular.module("bundle").factory("Utils",["$q","$interval",function(n,r){function e(r){var e,t,u=n.defer(),a={},o={};return t={then:function(n,e){if(r.then)return r.then(n);var t=r();if(t&&t.then)return t.then(n);try{return n(t)}catch(u){return e(u)}}},{exec:function(){t.then(function(r){return e=r,n.all(_.map(a,function(n){n(r)}))},function(r){return n.all(_.map(o,function(n){n(r)}))}).then(function(){return u.resolve(e),e})},registerCallback:function(n,r){a[n]=function(){a[n]=r.apply(r,arguments)}},unregisterCallback:function(n){delete a[n]},registerErrorCallback:function(n,r){o[n]=r},unregisterErrorCallback:function(n){delete o[n]},getCallback:function(n){return a[n]},result:function(){return e},promise:u.promise}}function t(n,e,t,u){var a=[],o=[],c=[];r(function(){var r=null;n()&&a.length&&o.length<(t||3)&&(r=a.pop(),r.registerCallback("$skurt:task-complete",function(){o.splice(o.indexOf(r),1),c.push(r)}),r.registerErrorCallback("$skurt:task-retry",function(){o.splice(o.indexOf(r),1),u?a.push(r):c.push(r)}),r.exec(),o.push(r))},e);return{push:function(n){a.push(n)},pop:function(){return a.pop()},forceNext:function(){var n=a.pop();n.registerCallback("$skurt:task-complete",function(){o.splice(o.indexOf(n),1),c.push(n)}),n.registerErrorCallback("$skurt:task-retry",function(){o.splice(o.indexOf(n),1),u?a.push(n):c.push(n)}),n.exec(),o.push(n)}}}return{Task:e,TaskQueue:t}}]);