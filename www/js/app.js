"use strict";angular.module("bundle",["ionic","ngCordova","xml"]).run(["$ionicPlatform",function(e){e.ready(function(){window.cordova&&window.cordova.plugins.Keyboard&&(cordova.plugins.Keyboard.hideKeyboardAccessoryBar(!0),cordova.plugins.Keyboard.disableScroll(!0)),window.StatusBar&&StatusBar.styleDefault()})}]),angular.module("bundle").config(["$httpProvider","$stateProvider","$urlRouterProvider",function(e,r,t){e.interceptors.push("xmlHttpInterceptor"),t.otherwise("/home"),r.state("home",{url:"/home",views:{home:{templateUrl:"views/home.html"}}}).state("help",{url:"/help",controller:"DashboardCtrl",views:{home:{templateUrl:"views/help.html"}}})}]),angular.module("bundle").controller("DashboardCtrl",["$scope","$q","Utils","CordovaService","UPCService",function(e,r,t,n,o){var u=t.Task,a=[];e.startScan=function(){var e=new u(function(){return n.scan()});e.registerCallback("data",o.getItemInfo),a.push(e),e.exec()},e.items=function(){return _.map(a,function(e){return e.getCallback("data")})}}]),angular.module("bundle").directive("onFilePick",function(){return{restrict:"A",link:function(e,r,t){var n=e.$eval(t.onFilePick);r.bind("change",n)}}}),angular.module("bundle").factory("CordovaService",["$http","$q","$cordovaBarcodeScanner",function(e,r,t){var n={scan:t.scan};return n}]),angular.module("bundle").factory("UPCService",["$q","$http",function(e,r){function t(t){var n=e.defer();return console.log(t),r.get("http://www.searchupc.com/handlers/upcsearch.ashx?request_type=3&access_token=C1555391-AB2D-40A7-9575-AF6F819FBF20&upc="+t.text).then(function(e){console.log(e.data),n.resolve(e.data[0])}),n.promise}return{getItemInfo:t}}]),angular.module("bundle").factory("Utils",["$q","$interval",function(e,r){function t(r){var t,n,o=e.defer(),u={},a={};return n={then:function(e,t){if(r.then)return r.then(e);var n=r();if(n&&n.then)return n.then(e);try{return e(n)}catch(o){return t(o)}}},{exec:function(){n.then(function(r){return t=r,e.all(_.map(u,function(e){e(r)}))},function(r){return e.all(_.map(a,function(e){e(r)}))}).then(function(){return o.resolve(t),t})},registerCallback:function(e,r){u[e]=function(){u[e]=r.apply(r,arguments)}},unregisterCallback:function(e){delete u[e]},registerErrorCallback:function(e,r){a[e]=r},unregisterErrorCallback:function(e){delete a[e]},getCallback:function(e){return u[e]},result:function(){return t},promise:o.promise}}function n(e,t,n,o){var u=[],a=[],c=[];r(function(){var r=null;e()&&u.length&&a.length<(n||3)&&(r=u.pop(),r.registerCallback("$skurt:task-complete",function(){a.splice(a.indexOf(r),1),c.push(r)}),r.registerErrorCallback("$skurt:task-retry",function(){a.splice(a.indexOf(r),1),o?u.push(r):c.push(r)}),r.exec(),a.push(r))},t);return{push:function(e){u.push(e)},pop:function(){return u.pop()},forceNext:function(){var e=u.pop();e.registerCallback("$skurt:task-complete",function(){a.splice(a.indexOf(e),1),c.push(e)}),e.registerErrorCallback("$skurt:task-retry",function(){a.splice(a.indexOf(e),1),o?u.push(e):c.push(e)}),e.exec(),a.push(e)}}}return{Task:t,TaskQueue:n}}]);